<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Coasters Tavern Digital Signage</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;600&family=Roboto:wght@700&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM (UMD for standalone) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      body {
        font-family: 'Inter', sans-serif;
        background-color: #000;
        color: white;
        overflow: hidden;
      }
      h1, h2, h3, .serif {
        font-family: 'Playfair Display', serif;
      }

      /* --- Animations --- */
      @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
      }
      @keyframes spin-slow {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      @keyframes shimmer {
        100% { transform: translateX(100%) skewX(12deg); }
      }
      @keyframes subtleZoom {
        0% { transform: scale(1); }
        100% { transform: scale(1.15); }
      }
      @keyframes rain {
        0% { transform: translateY(0); opacity: 0; }
        20% { opacity: 1; }
        90% { opacity: 1; }
        100% { transform: translateY(60px); opacity: 0; }
      }

      .animate-float { animation: float 6s ease-in-out infinite; }
      .animate-spin-slow { animation: spin-slow 12s linear infinite; }
      .animate-shimmer { animation: shimmer 2s infinite; }
      .animate-rain { animation: rain 1.5s ease-in infinite; }

      .text-glow { text-shadow: 0 0 20px rgba(255,255,255,0.4); }
      .box-glow { box-shadow: 0 0 30px rgba(255, 255, 255, 0.2), inset 0 0 20px rgba(255, 255, 255, 0.1); }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/",
    "lucide-react": "https://esm.sh/lucide-react@^0.562.0"
  }
}
</script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback, useMemo } = React;

        // --- CONSTANTS & TYPES ---
        const SLIDE_DURATION_MS = 30000;
        const STORAGE_KEY = 'restaurant_slides_v1';

        const INITIAL_SLIDES = [
          {
            id: '1',
            day: 'Monday',
            title: 'Steak Day Monday\'s',
            description: 'Start your week off with a 200g Succulent Rump Steak, cooked to your liking, served with golden fries and a green garden salad.',
            price: '$20',
            imageUrl: 'images/bg1.jpg',
            highlightColor: '#f59e0b',
            type: 'promo'
          },
          {
            id: '2',
            day: 'Tuesday',
            title: 'Chase the Ace',
            description: 'Purchase a beverage between 3.30pm and 5.30pm and you\'re in the draw. Drawn @ 5.30pm',
            price: '5.30pm',
            imageUrl: 'images/bg2.jpg',
            highlightColor: '#ef4444',
            type: 'promo'
          },
          {
            id: '3',
            day: 'Wednesday',
            title: 'Quiz Night',
            description: 'Starting back on the 21st January 2026, $190 in prizes up for grabs. Bookings Essential.',
            price: 'FREE ENTRY',
            imageUrl: 'images/bg3.jpg',
            highlightColor: '#eab308',
            type: 'promo'
          },
          {
            id: '4',
            day: 'Thursday',
            title: 'Burger Day Thursdays',
            description: 'Your choice of Chicken, Beer Battered Fish, Pork Belly or Coasters Beef Burger, all served with Golden Fries & Onion Rings. 1 Burger for $19 or 2 for $35. Available from 12pm.',
            price: '$19 or $35!',
            imageUrl: 'images/bg4.jpg',
            highlightColor: '#f97316',
            type: 'promo'
          },
          {
            id: '5',
            day: 'Friday',
            title: 'Happy Hours 10%',
            description: 'Enjoy 10% discount on selected beverages between 4.30pm & 6.30pm.',
            price: '10% Off!',
            imageUrl: 'images/bg1.jpg',
            highlightColor: '#3b82f6',
            type: 'promo'
          },
          {
            id: '6',
            day: 'Saturday',
            title: 'Chase the Ace',
            description: 'Tickets from 3.30pm, Draw @ 6.30pm.',
            price: '$35',
            imageUrl: 'images/bg2.jpg',
            highlightColor: '#06b6d4',
            type: 'promo'
          },
          {
            id: '7',
            day: 'Sunday',
            title: 'Two Course Sunday Roast',
            description: 'Traditional roast of the day with roasted vegetables, seasonal greens and rich gravy, with an Ice Cream Sundae to finish.',
            price: '$28',
            imageUrl: 'images/bg3.jpg',
            highlightColor: '#84cc16',
            type: 'promo'
          },
          {
            id: '9',
            day: 'Thursday',
            title: 'Free Pool Thursdays',
            description: 'Our Pool Table is Free all day and night on Thursdays! Grab a cue and challenge your mates.',
            price: 'FREE',
            imageUrl: 'images/bg4.jpg',
            highlightColor: '#f97316',
            type: 'promo'
          },
          {
            id: '10',
            day: 'Membership',
            title: 'Loyalty App',
            description: 'Join our loyalty program! Earn points with every purchase and redeem them for food and drinks.',
            price: 'Join Today',
            imageUrl: 'images/bg1.jpg',
            highlightColor: '#8b5cf6',
            type: 'promo'
          }
        ];

        // --- ICONS (Inline SVGs to replace Lucide) ---
        const Icon = ({ path, className }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {path}
            </svg>
        );

        const Icons = {
            Settings: (props) => <Icon {...props} path={<><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></>} />,
            Play: (props) => <Icon {...props} path={<polygon points="5 3 19 12 5 21 5 3"/>} />,
            Pause: (props) => <Icon {...props} path={<><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></>} />,
            SkipForward: (props) => <Icon {...props} path={<><polygon points="5 4 15 12 5 20 5 4"/><line x1="19" y1="5" x2="19" y2="19"/></>} />,
            SkipBack: (props) => <Icon {...props} path={<><polygon points="19 20 9 12 19 4 19 20"/><line x1="5" y1="19" x2="5" y2="5"/></>} />,
            Plus: (props) => <Icon {...props} path={<><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></>} />,
            Trash2: (props) => <Icon {...props} path={<><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></>} />,
            Save: (props) => <Icon {...props} path={<><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></>} />,
            X: (props) => <Icon {...props} path={<><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></>} />,
            Edit2: (props) => <Icon {...props} path={<path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/>} />,
            ArrowLeft: (props) => <Icon {...props} path={<><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></>} />,
        };


        // --- GLASS ICONS (Weather) ---
        const getSizeClasses = (size) => {
            switch(size) {
                case 'xl': return 'w-64 h-64';
                case 'lg': return 'w-48 h-48';
                case 'md': return 'w-32 h-32';
                case 'sm': return 'w-16 h-16';
                default: return 'w-32 h-32';
            }
        };

        const GlassSun = ({ size = 'lg' }) => {
            const dim = getSizeClasses(size);
            return (
                <div className={`relative ${dim} flex items-center justify-center`}>
                    <div className="absolute inset-0 animate-spin-slow">
                        {[0, 45, 90, 135, 180, 225, 270, 315].map((deg) => (
                            <div key={deg} className="absolute top-1/2 left-1/2 w-[120%] h-[2px] bg-gradient-to-r from-transparent via-orange-300/30 to-transparent" style={{ transform: `translate(-50%, -50%) rotate(${deg}deg)` }} />
                        ))}
                    </div>
                    <div className="absolute inset-0 bg-orange-500/20 blur-3xl rounded-full transform scale-75"></div>
                    <div className="relative w-[55%] h-[55%] rounded-full shadow-[0_0_50px_rgba(251,146,60,0.5)] animate-float">
                        <div className="absolute inset-0 rounded-full bg-gradient-to-br from-amber-300 via-orange-500 to-red-500"></div>
                        <div className="absolute inset-x-2 top-0 h-1/2 bg-gradient-to-b from-white/40 to-transparent rounded-t-full blur-[1px]"></div>
                        <div className="absolute inset-0 rounded-full border-2 border-white/20"></div>
                        <div className="absolute top-[15%] right-[15%] w-3 h-3 bg-white/80 rounded-full blur-[1px]"></div>
                    </div>
                </div>
            );
        };

        const GlassCloud = ({ size = 'lg' }) => {
            const dim = getSizeClasses(size);
            return (
                <div className={`relative ${dim} flex items-center justify-center animate-float`}>
                    <div className="absolute bottom-[20%] w-[70%] h-4 bg-black/40 blur-xl rounded-[100%]"></div>
                    <div className="absolute bottom-[25%] left-[15%] w-[45%] h-[45%] rounded-full bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-md border border-white/10 z-10"></div>
                    <div className="absolute bottom-[30%] right-[10%] w-[40%] h-[40%] rounded-full bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-md border border-white/10 z-10"></div>
                    <div className="absolute bottom-[20%] left-[15%] right-[15%] h-[45%] rounded-[50px] bg-gradient-to-b from-white/30 to-white/5 backdrop-blur-xl border-t border-l border-white/40 shadow-xl z-20 flex items-center justify-center">
                        <div className="absolute top-2 left-8 w-[40%] h-[20%] bg-white/10 rounded-full blur-md"></div>
                    </div>
                    <div className="absolute top-[20%] left-[25%] w-[50%] h-[50%] rounded-full bg-gradient-to-b from-white/40 to-white/5 backdrop-blur-xl border-t border-l border-white/40 z-30 shadow-lg">
                        <div className="absolute top-[15%] left-[20%] w-6 h-4 bg-white/30 rounded-full blur-[2px] transform -rotate-12"></div>
                    </div>
                </div>
            );
        };

        const GlassRain = ({ size = 'lg' }) => {
            const dim = getSizeClasses(size);
            return (
                <div className={`relative ${dim} flex items-center justify-center`}>
                    <div className="absolute inset-0 z-20"><GlassCloud size={size} /></div>
                    <div className="absolute inset-0 z-10 overflow-visible">
                        <div className="absolute bottom-[20%] left-[30%] w-1.5 h-6 bg-gradient-to-b from-cyan-200 to-blue-500 rounded-full animate-rain opacity-0 shadow-[0_0_8px_rgba(56,189,248,0.8)]" style={{ animationDelay: '0s' }}></div>
                        <div className="absolute bottom-[20%] left-[50%] w-1.5 h-8 bg-gradient-to-b from-cyan-200 to-blue-500 rounded-full animate-rain opacity-0 shadow-[0_0_8px_rgba(56,189,248,0.8)]" style={{ animationDelay: '0.5s' }}></div>
                        <div className="absolute bottom-[20%] right-[30%] w-1.5 h-5 bg-gradient-to-b from-cyan-200 to-blue-500 rounded-full animate-rain opacity-0 shadow-[0_0_8px_rgba(56,189,248,0.8)]" style={{ animationDelay: '1.2s' }}></div>
                    </div>
                </div>
            );
        };

        const GlassPartlyCloudy = ({ size = 'lg' }) => {
            const dim = getSizeClasses(size);
            return (
                <div className={`relative ${dim} flex items-center justify-center`}>
                    <div className="absolute top-[-15%] right-[-15%] z-0 transform scale-[0.6]"><GlassSun size={size} /></div>
                    <div className="absolute bottom-0 left-[-10%] z-10 transform scale-[0.85]"><GlassCloud size={size} /></div>
                </div>
            );
        };


        // --- WEATHER COMPONENT ---
        const getMockForecast = () => {
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            const today = new Date().getDay();
            const forecasts = [];
            for (let i = 0; i < 7; i++) {
                const dayIndex = (today + i) % 7;
                const r = Math.random();
                let condition = 'sunny';
                if (r > 0.8) condition = 'rain';
                else if (r > 0.6) condition = 'cloudy';
                else if (r > 0.4) condition = 'partly-cloudy';
                forecasts.push({
                    day: i === 0 ? 'Today' : days[dayIndex],
                    temp: Math.floor(Math.random() * (24 - 14) + 14),
                    condition
                });
            }
            return forecasts;
        };

        const WeatherIcon = ({ condition, size }) => {
            switch (condition) {
                case 'rain': return <GlassRain size={size} />;
                case 'cloudy': return <GlassCloud size={size} />;
                case 'partly-cloudy': return <GlassPartlyCloudy size={size} />;
                default: return <GlassSun size={size} />;
            }
        };

        const WeatherView = () => {
            const forecast = useMemo(() => getMockForecast(), []);
            const current = forecast[0];

            return (
                <div className="w-full h-full relative overflow-hidden bg-gradient-to-br from-slate-950 via-black to-slate-900 text-white flex flex-col items-center justify-center p-8">
                    <div className="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"></div>
                    <div className="absolute top-[-20%] left-[20%] w-[600px] h-[600px] bg-blue-900/10 rounded-full blur-[120px]"></div>
                    <div className="absolute bottom-[-20%] right-[10%] w-[800px] h-[800px] bg-indigo-900/10 rounded-full blur-[150px]"></div>

                    <div className="relative z-10 w-full max-w-7xl h-full flex flex-col">
                        <div className="text-center mb-10 pt-8">
                            <h2 className="text-xl md:text-2xl font-light tracking-[0.3em] uppercase text-blue-200/60 mb-3">Live Weather</h2>
                            <h1 className="text-6xl md:text-8xl font-serif font-bold text-transparent bg-clip-text bg-gradient-to-b from-white to-white/60 drop-shadow-xl">Christchurch</h1>
                        </div>
                        <div className="flex-1 flex flex-col md:flex-row items-center justify-center gap-12 lg:gap-24 mb-12">
                            <div className="scale-125 md:scale-150 p-4 drop-shadow-2xl">
                                <WeatherIcon condition={current.condition} size="xl" />
                            </div>
                            <div className="flex flex-col items-start p-10 rounded-[3rem] backdrop-blur-xl bg-white/5 border border-white/10 shadow-[0_0_40px_rgba(0,0,0,0.3)] min-w-[300px]">
                                <span className="text-9xl font-black tracking-tighter drop-shadow-lg text-white">{current.temp}°</span>
                                <span className="text-4xl font-light capitalize text-blue-100/80 mt-2 tracking-wide">{current.condition.replace('-', ' ')}</span>
                                <div className="w-full h-px bg-white/20 my-6"></div>
                                <div className="flex w-full justify-between text-lg font-medium text-blue-200/70">
                                    <div className="flex flex-col"><span className="text-xs uppercase tracking-widest opacity-60">High</span><span>{current.temp + 2}°</span></div>
                                    <div className="flex flex-col"><span className="text-xs uppercase tracking-widest opacity-60">Low</span><span>{current.temp - 4}°</span></div>
                                    <div className="flex flex-col text-right"><span className="text-xs uppercase tracking-widest opacity-60">Wind</span><span>12<span className="text-xs">km/h</span></span></div>
                                </div>
                            </div>
                        </div>
                        <div className="grid grid-cols-3 md:grid-cols-6 gap-4 w-full">
                            {forecast.slice(1).map((day, idx) => (
                                <div key={idx} className="group flex flex-col items-center justify-between p-4 py-6 rounded-2xl bg-white/5 border border-white/5 backdrop-blur-md shadow-lg hover:bg-white/10 transition-all duration-300 hover:-translate-y-1">
                                    <span className="text-lg font-semibold tracking-wide text-blue-100/90 group-hover:text-white">{day.day}</span>
                                    <div className="my-6 transform scale-90 group-hover:scale-110 transition-transform duration-500">
                                        <WeatherIcon condition={day.condition} size="sm" />
                                    </div>
                                    <span className="text-3xl font-bold text-white/90 group-hover:text-white">{day.temp}°</span>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };


        // --- SLIDE COMPONENT ---
        const Slide = ({ data }) => {
            return (
                <div className="relative w-full h-full overflow-hidden font-sans">
                    <div className="absolute inset-0">
                        <img 
                            src={data.imageUrl} 
                            alt={data.title} 
                            className="w-full h-full object-cover transition-transform duration-[30000ms] ease-linear transform scale-100 hover:scale-110" 
                            style={{ animation: 'subtleZoom 35s linear infinite alternate' }}
                        />
                        <div className="absolute inset-0 bg-black/60"></div>
                        <div className="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-black/60"></div>
                    </div>
                    <div className="relative z-10 w-full h-full flex flex-col justify-center items-center p-8 md:p-16 max-w-[90%] mx-auto text-center space-y-12">
                        <div className="animate-slide-down">
                            <span 
                                className="px-10 py-4 rounded-full text-4xl font-black uppercase tracking-[0.2em] border-2 border-white/40 backdrop-blur-xl shadow-[0_0_30px_rgba(255,255,255,0.3)]"
                                style={{ 
                                    backgroundColor: `${data.highlightColor}40`,
                                    borderColor: data.highlightColor,
                                    color: '#fff',
                                    textShadow: '0 2px 10px rgba(0,0,0,0.5)',
                                    boxShadow: `0 0 30px ${data.highlightColor}60`
                                }}
                            >
                                {data.day || 'Special Event'}
                            </span>
                        </div>
                        <div className="flex flex-col items-center space-y-8 animate-fade-in-up">
                            <h1 className="text-7xl md:text-9xl font-serif font-black leading-none text-white drop-shadow-[0_5px_15px_rgba(0,0,0,0.8)] text-glow tracking-wide">{data.title}</h1>
                            <div className="h-2 w-48 rounded-full shadow-[0_0_20px_rgba(245,158,11,0.8)]" style={{ backgroundColor: data.highlightColor || '#f59e0b' }}></div>
                            <p className="text-3xl md:text-4xl text-gray-100 font-bold leading-relaxed max-w-6xl drop-shadow-lg opacity-90">{data.description}</p>
                            {data.price && (
                                <div className="mt-12 animate-pop-in">
                                    <div className="relative group rounded-3xl p-[2px] bg-gradient-to-br from-white/60 to-white/10 overflow-hidden shadow-[0_0_50px_rgba(245,158,11,0.4)]">
                                        <div className="absolute inset-0 bg-white/20 blur-xl"></div>
                                        <div className="relative px-16 py-8 rounded-[22px] backdrop-blur-xl bg-black/40 border border-white/20 flex flex-col items-center justify-center">
                                            <span className="text-7xl md:text-8xl font-black text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.5)]" style={{ fontFamily: "'Roboto', sans-serif" }}>{data.price}</span>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };


        // --- ADMIN PANEL ---
        const AdminPanel = ({ slides, onSave, onClose }) => {
            const [localSlides, setLocalSlides] = useState(slides);
            const [editingId, setEditingId] = useState(null);
            const [formData, setFormData] = useState({});

            const handleEdit = (slide) => {
                setEditingId(slide.id);
                setFormData(slide);
            };

            const handleCreate = () => {
                const newSlide = {
                    id: Date.now().toString(),
                    type: 'promo',
                    day: 'Monday',
                    title: 'New Special',
                    description: 'Description here...',
                    price: '$0',
                    imageUrl: 'https://picsum.photos/1920/1080',
                    highlightColor: '#eab308'
                };
                setLocalSlides([...localSlides, newSlide]);
                handleEdit(newSlide);
            };

            const handleDelete = (id) => {
                if (confirm('Are you sure you want to delete this slide?')) {
                    const updated = localSlides.filter(s => s.id !== id);
                    setLocalSlides(updated);
                    onSave(updated);
                    if (editingId === id) setEditingId(null);
                }
            };

            const handleSaveForm = () => {
                if (!formData.id) return;
                const updated = localSlides.map(s => s.id === formData.id ? { ...s, ...formData } : s);
                setLocalSlides(updated);
                onSave(updated);
                setEditingId(null);
                setFormData({});
            };

            return (
                <div className="fixed inset-0 z-50 bg-slate-900 text-white overflow-y-auto">
                    <div className="max-w-6xl mx-auto p-8">
                        <div className="flex justify-between items-center mb-10 border-b border-slate-700 pb-6">
                            <div className="flex items-center gap-4">
                                <button onClick={onClose} className="p-2 hover:bg-slate-800 rounded-full transition-colors"><Icons.ArrowLeft className="w-6 h-6" /></button>
                                <h1 className="text-3xl font-serif font-bold text-amber-500">Slide Management</h1>
                            </div>
                            <button onClick={handleCreate} className="flex items-center gap-2 bg-amber-600 hover:bg-amber-700 text-white px-6 py-3 rounded-lg font-bold transition-all shadow-lg">
                                <Icons.Plus className="w-5 h-5" /> Add New Slide
                            </button>
                        </div>
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <div className="space-y-4">
                                <h2 className="text-xl font-semibold mb-4 text-slate-400 uppercase tracking-wider">Active Slides</h2>
                                {localSlides.filter(s => s.type === 'promo').map(slide => (
                                    <div key={slide.id} className={`p-4 rounded-xl border transition-all cursor-pointer flex justify-between items-center group ${editingId === slide.id ? 'bg-amber-900/30 border-amber-500' : 'bg-slate-800 border-slate-700 hover:border-slate-500'}`} onClick={() => handleEdit(slide)}>
                                        <div className="flex gap-4 items-center">
                                            <div className="w-16 h-16 rounded-lg overflow-hidden bg-slate-900 shrink-0"><img src={slide.imageUrl} className="w-full h-full object-cover" alt="thumbnail" /></div>
                                            <div><h3 className="font-bold text-lg">{slide.title}</h3><p className="text-slate-400 text-sm">{slide.day} • {slide.price}</p></div>
                                        </div>
                                        <div className="flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                            <button onClick={(e) => { e.stopPropagation(); handleEdit(slide); }} className="p-2 hover:bg-blue-600/20 text-blue-400 rounded-full"><Icons.Edit2 className="w-5 h-5" /></button>
                                            <button onClick={(e) => { e.stopPropagation(); handleDelete(slide.id); }} className="p-2 hover:bg-red-600/20 text-red-400 rounded-full"><Icons.Trash2 className="w-5 h-5" /></button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                            <div className="bg-slate-800 p-8 rounded-2xl border border-slate-700 sticky top-8 h-fit">
                                {editingId ? (
                                    <div className="space-y-6">
                                        <div className="flex justify-between items-center"><h2 className="text-2xl font-bold">Edit Slide</h2><button onClick={() => setEditingId(null)} className="text-slate-400 hover:text-white"><Icons.X className="w-6 h-6" /></button></div>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div className="space-y-2"><label className="text-sm font-bold text-slate-400">Day / Label</label><input type="text" value={formData.day || ''} onChange={e => setFormData({...formData, day: e.target.value})} className="w-full bg-slate-900 border border-slate-600 rounded-lg p-3 focus:border-amber-500 focus:outline-none" /></div>
                                            <div className="space-y-2"><label className="text-sm font-bold text-slate-400">Price / Time</label><input type="text" value={formData.price || ''} onChange={e => setFormData({...formData, price: e.target.value})} className="w-full bg-slate-900 border border-slate-600 rounded-lg p-3 focus:border-amber-500 focus:outline-none" /></div>
                                        </div>
                                        <div className="space-y-2"><label className="text-sm font-bold text-slate-400">Title</label><input type="text" value={formData.title || ''} onChange={e => setFormData({...formData, title: e.target.value})} className="w-full bg-slate-900 border border-slate-600 rounded-lg p-3 focus:border-amber-500 focus:outline-none" /></div>
                                        <div className="space-y-2"><label className="text-sm font-bold text-slate-400">Description</label><textarea value={formData.description || ''} onChange={e => setFormData({...formData, description: e.target.value})} rows={4} className="w-full bg-slate-900 border border-slate-600 rounded-lg p-3 focus:border-amber-500 focus:outline-none" /></div>
                                        <div className="space-y-2">
                                            <label className="text-sm font-bold text-slate-400">Image URL</label>
                                            <input type="text" value={formData.imageUrl || ''} onChange={e => setFormData({...formData, imageUrl: e.target.value})} className="w-full bg-slate-900 border border-slate-600 rounded-lg p-3 focus:border-amber-500 focus:outline-none text-sm font-mono" />
                                            <p className="text-xs text-slate-500">Use 'images/filename.jpg' or external URL.</p>
                                        </div>
                                        <div className="space-y-2">
                                            <label className="text-sm font-bold text-slate-400">Highlight Color</label>
                                            <div className="flex gap-2">
                                                <input type="color" value={formData.highlightColor || '#eab308'} onChange={e => setFormData({...formData, highlightColor: e.target.value})} className="h-10 w-20 bg-transparent cursor-pointer rounded overflow-hidden" />
                                                <input type="text" value={formData.highlightColor || ''} onChange={e => setFormData({...formData, highlightColor: e.target.value})} className="flex-1 bg-slate-900 border border-slate-600 rounded-lg p-3 uppercase font-mono" />
                                            </div>
                                        </div>
                                        <button onClick={handleSaveForm} className="w-full bg-amber-600 hover:bg-amber-700 text-white font-bold py-4 rounded-xl flex items-center justify-center gap-2 transition-all"><Icons.Save className="w-5 h-5" /> Save Changes</button>
                                    </div>
                                ) : (
                                    <div className="h-full flex flex-col items-center justify-center text-slate-500 opacity-50"><Icons.Edit2 className="w-16 h-16 mb-4" /><p className="text-xl">Select a slide to edit or create new.</p></div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };


        // --- MAIN APP COMPONENT ---
        const App = () => {
            const [slides, setSlides] = useState([]);
            const [currentIndex, setCurrentIndex] = useState(0);
            const [isPlaying, setIsPlaying] = useState(true);
            const [isAdminOpen, setIsAdminOpen] = useState(false);
            const [progress, setProgress] = useState(0);

            useEffect(() => {
                const saved = localStorage.getItem(STORAGE_KEY);
                if (saved) {
                    try {
                        setSlides(JSON.parse(saved));
                    } catch (e) {
                        setSlides(INITIAL_SLIDES);
                    }
                } else {
                    setSlides(INITIAL_SLIDES);
                }
            }, []);

            const playlist = useMemo(() => {
                const weatherSlide = { id: 'weather-special', type: 'weather', title: 'Weather', description: '', imageUrl: '' };
                if (slides.length === 0) return [weatherSlide];
                return [...slides, weatherSlide];
            }, [slides]);

            const currentSlide = playlist[currentIndex] || playlist[0];
            const startTimeRef = useRef(null);

            const nextSlide = useCallback(() => {
                setCurrentIndex((prev) => (prev + 1) % playlist.length);
                setProgress(0);
                startTimeRef.current = Date.now();
            }, [playlist.length]);

            const prevSlide = useCallback(() => {
                setCurrentIndex((prev) => (prev - 1 + playlist.length) % playlist.length);
                setProgress(0);
                startTimeRef.current = Date.now();
            }, [playlist.length]);

            useEffect(() => {
                if (!isPlaying || isAdminOpen) return;
                const step = 100;
                startTimeRef.current = Date.now() - (progress / 100) * SLIDE_DURATION_MS;
                const interval = setInterval(() => {
                    const now = Date.now();
                    const elapsed = now - (startTimeRef.current || now);
                    const newProgress = (elapsed / SLIDE_DURATION_MS) * 100;
                    if (newProgress >= 100) nextSlide();
                    else setProgress(newProgress);
                }, step);
                return () => clearInterval(interval);
            }, [isPlaying, isAdminOpen, nextSlide, progress]);

            const handleAdminSave = (newSlides) => {
                setSlides(newSlides);
                localStorage.setItem(STORAGE_KEY, JSON.stringify(newSlides));
            };

            if (!currentSlide) return <div className="bg-black h-screen w-screen text-white flex items-center justify-center">Loading...</div>;

            return (
                <div className="relative w-screen h-screen bg-black overflow-hidden group font-sans">
                    <div className="w-full h-full">
                        {currentSlide.type === 'weather' ? <WeatherView /> : <Slide key={currentSlide.id} data={currentSlide} />}
                    </div>
                    <div className="absolute top-8 left-8 z-[60] pointer-events-none">
                        <img 
                            src="images/logo.png" 
                            onError={(e) => { e.currentTarget.style.display = 'none'; }}
                            alt="Coasters Tavern" 
                            className="w-48 h-48 object-contain drop-shadow-[0_4px_15px_rgba(0,0,0,0.8)]"
                        />
                    </div>
                    <div className="absolute bottom-0 left-0 w-full h-4 bg-black/60 z-40 backdrop-blur-sm border-t border-white/10">
                        <div className="h-full bg-gradient-to-r from-yellow-600 via-amber-500 to-yellow-400 shadow-[0_0_25px_rgba(251,191,36,0.8)] transition-all duration-100 ease-linear relative overflow-hidden" style={{ width: `${progress}%` }}>
                            <div className="absolute inset-0 bg-white/20 skew-x-12 translate-x-[-100%] animate-shimmer" style={{ animation: 'shimmer 2s infinite' }}></div>
                        </div>
                    </div>
                    <div className="absolute top-8 right-8 z-50 flex items-center gap-3 opacity-0 group-hover:opacity-100 transition-opacity duration-500 p-2 rounded-full bg-black/40 backdrop-blur-md border border-white/20 shadow-2xl">
                        <button onClick={prevSlide} className="p-4 bg-white/10 hover:bg-amber-600 rounded-full text-white transition-all"><Icons.SkipBack className="w-6 h-6" /></button>
                        <button onClick={() => setIsPlaying(!isPlaying)} className="p-4 bg-white/10 hover:bg-amber-600 rounded-full text-white transition-all">{isPlaying ? <Icons.Pause className="w-6 h-6" /> : <Icons.Play className="w-6 h-6" />}</button>
                        <button onClick={nextSlide} className="p-4 bg-white/10 hover:bg-amber-600 rounded-full text-white transition-all"><Icons.SkipForward className="w-6 h-6" /></button>
                        <div className="w-px h-8 bg-white/20 mx-2"></div>
                        <button onClick={() => setIsAdminOpen(true)} className="p-4 bg-white/10 hover:bg-blue-600 rounded-full text-white transition-all" title="Admin Settings"><Icons.Settings className="w-6 h-6" /></button>
                    </div>
                    {isAdminOpen && <AdminPanel slides={slides} onSave={handleAdminSave} onClose={() => setIsAdminOpen(false)} />}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>